From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: JellySquid <jellysquid+atwork@protonmail.com>
Date: Mon, 11 May 2020 21:00:44 +0200
Subject: [PATCH] lithium MixinDirection

Original code by JellySquid, licensed under GNU Lesser General Public License v3.0
you can find the original code on https://github.com/CaffeineMC/lithium-fabric/ (Yarn mappings)

diff --git a/src/main/java/net/minecraft/core/EnumDirection.java b/src/main/java/net/minecraft/core/EnumDirection.java
index 19bc37143140b4e3a06a87297205b702548b0fa3..1828366dace7a4c343b289012fa51779c2e1259a 100644
--- a/src/main/java/net/minecraft/core/EnumDirection.java
+++ b/src/main/java/net/minecraft/core/EnumDirection.java
@@ -112,8 +112,12 @@ public enum EnumDirection implements INamable {
         return this.l;
     }
 
+    /**
+     * @reason Avoid the modulo/abs operations
+     * @author JellySquid
+     */
     public EnumDirection opposite() {
-        return fromType1(this.h);
+        return getValues()[this.h];
     }
 
     public EnumDirection rotateCW() { return g(); } // Purpur - OBFHELPER
@@ -214,8 +218,12 @@ public enum EnumDirection implements INamable {
         return (float) ((this.i & 3) * 90);
     }
 
+    /**
+     * @reason Do not allocate an excessive number of Direction arrays
+     * @author JellySquid
+     */
     public static EnumDirection a(Random random) {
-        return (EnumDirection) SystemUtils.a((Object[]) EnumDirection.n, random);
+        return getValues()[random.nextInt(getValues().length)];
     }
 
     public static EnumDirection a(double d0, double d1, double d2) {
